<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="彤哥哥的博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://ltyeamin.github.io">
    <!--SEO-->

    <meta name="keywords" content="计算机网络">


    <meta name="description" content="1 IPv4组成与分类1.1 IPv4组成我们把整个互联网看成为一个单一的、抽象的网络。IP 地址就是给每个连接在互联网上的主机（或路由器）分配一个在全世界范围是唯一的32位的标识符。
IP 地...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">
    <!--Title-->


<title>跟着彤哥学网络-网络层之IPv4 | 彤哥哥的博客</title>


    <link rel="alternate" href="/atom.xml" title="彤哥哥的博客" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">


<script src="/js/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">
<link rel="stylesheet" href="/css/calendar.css?rev=@@hash">
<link rel="stylesheet" href="/css/variable.css?rev=@@hash">
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?ebfd000c0e7cc1ee84a00f01d419b1e2";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
    
</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
    <header class="main-header" style="background-image:url(http://snippet.shenliyang.com/img/banner.jpg)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="YeaMin">
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                 <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://ltyeamin.github.io">彤哥哥的博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa"></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/backend/"><i class="fa"></i>后端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/frontend/"><i class="fa"></i>前端</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/ops/"><i class="fa"></i>运维</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/database/"><i class="fa"></i>数据库</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/algorithm/"><i class="fa"></i>算法</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/pm/"><i class="fa"></i>项目管理</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href=""><i class="fa"></i>自媒体</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/others/"><i class="fa"></i>生活</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/about"><i class="fa /favicon.ico"></i>关于</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="跟着彤哥学网络-网络层之IPv4">
            
	            跟着彤哥学网络-网络层之IPv4
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/categories/ops/">ops</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/tags/计算机网络/">计算机网络</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2019/12/23</span>
        </span>
        
            <span class="fa-wrap">
                <i class="fa fa-eye"></i>
                <span id="busuanzi_value_page_pv"></span>
            </span>
        
    
</div>
            
            
    </div>
    
    <div class="post-body post-content">
        <h1 id="1-IPv4组成与分类"><a href="#1-IPv4组成与分类" class="headerlink" title="1 IPv4组成与分类"></a>1 IPv4组成与分类</h1><h2 id="1-1-IPv4组成"><a href="#1-1-IPv4组成" class="headerlink" title="1.1 IPv4组成"></a>1.1 IPv4组成</h2><p>我们把整个互联网看成为一个单一的、抽象的网络。IP 地址就是给每个连接在互联网上的主机（或路由器）分配一个在全世界范围是<strong>唯一的32位</strong>的标识符。</p>
<p>IP 地址现在由互联网名字和数字分配机构ICANN (Internet Corporation for Assigned Names and Numbers)进行分配，我国用户可向亚太网络信息中心APNIC(Asia Pacific Network Information Center)缴费申请IP地址。</p>
<p>在国内实际上都是ISP网络运营商统一申请，最终分配到企业以及家庭个人用户。以前在IP地址不稀缺的情况下，个人有可能分配到公网的IP地址，现在几乎不可能了，IP地址资源有限，不可能每台主机都分配一个公网IP。</p>
<p>有关IP最重要的协议文档就是互联网的正式标准<a href="https://datatracker.ietf.org/doc/rfc791/" target="_blank" rel="noopener">RFC 791</a>。</p>
<h2 id="1-2-IPv4现状"><a href="#1-2-IPv4现状" class="headerlink" title="1.2 IPv4现状"></a>1.2 IPv4现状</h2><p>我们常常说的IP，其实就是IPv4，即IP的第四个版本，该版本地址空间有限，到某个阶段IP地址将会耗尽。</p>
<p>该过程自80年代以来就已预见到，顶级地址实际上已经在2012年耗尽。那时，所有IPv4地址空间已分配给五大区域互联网注册机构，非洲网络信息中心 (AFRINIC)针对非洲，北美网络信息中心（ARIN）针对南极洲、加拿大、部分加勒比海地区和美国，亚太互联网络信息中心（APNIC）针对东亚、大洋洲、南亚和东南亚，拉丁美洲网络信息中心（LACNIC）针对加勒比海的大部分地区和整个拉丁美洲，以及欧洲网络信息中心（RIPE NCC）针对欧洲、中亚、俄罗斯和西亚。</p>
<p>那些区域性Internet注册很快就开始耗尽。2011年4月15日，亚太互联网络信息中心（APNIC）在2012年9月14日为欧洲，欧洲网络信息中心（RIPE NCC）分配了最后一个IPv4区块，在2014年6月10日为拉丁美洲和加勒比海（LACNIC）分配了最后一个IPv4区块。2015年9月24日为北美分配IPv4区块，直到今天，欧洲RIPE NCC终于耗尽了存储。</p>
<p>该消息是在2019年11月25号在一封电子邮件（由Nikolas Pediaditis发布）中宣布的，内容为：</p>
<p><img src="https://img.ithome.com/newsuploadfiles/2019/11/20191126_070327_863.jpg" alt="IPv4耗尽"></p>
<p>大概译文如下：</p>
<blockquote>
<p>亲爱的同事们，</p>
<p>今天，在2019年11月25日UTC + 1 15:35，我们从可用池中的最后剩余地址进行了最终的/22 IPv4分配。现在，我们已经用完了IPv4地址。</p>
<p>对于网络运营商来说，我们的宣布并不令人惊讶– RIPE社区早就预料到并计划IPv4耗尽。实际上，正是由于社区对这些资源的负责任管理，我们才能够在2012年达到最后一个/8后，向我们服务区域内的数千个新网络提供/22分配。</p>
</blockquote>
<p>从理论上讲，IPv4地址耗尽应该意味着不能将任何新的IPv4设备添加到Internet，但是实际上，许多因素会进行缓解。<br>首先是ISP可以重用和回收未使用的IPv4地址。第二个原因是由于NAT（网络地址转换），因此可以在ISP路由器后面私下使用相同的IP地址。当然，最后是向IPv6的过渡，现在应该建立良好的秩序，从而可以通过具有3.4×10^38巨大地址空间的Internet直接进行对等连接。</p>
<h2 id="1-3-IPv4地址编址方法"><a href="#1-3-IPv4地址编址方法" class="headerlink" title="1.3 IPv4地址编址方法"></a>1.3 IPv4地址编址方法</h2><ul>
<li><strong>分类的IP地址</strong>。这是最基本的编址方法，在1981年就通过了相应的标准协议。</li>
<li><strong>子网的划分</strong>。这是对最基本的编址方法的改进，其标准[<a href="https://datatracker.ietf.org/doc/rfc950/" target="_blank" rel="noopener">RFC 950</a>]在1985年通过。</li>
<li><strong>构成超网</strong>。这是比较新的无分类编址方法。1993年提出后很快就得到推广应用。<h2 id="1-4-IPv4基本分类"><a href="#1-4-IPv4基本分类" class="headerlink" title="1.4 IPv4基本分类"></a>1.4 IPv4基本分类</h2><strong>IP地址(32位) =  网络号 + 主机号 </strong></li>
</ul>
<p>每一类地址都由两个固定长度的字段组成，其中一个字段是网络号 net-id，它标志主机（或路由器）所连接到的网络，而另一个字段则是主机号 host-id，它标志该主机（或路由器）。</p>
<p>主机号在它前面的网络号所指明的网络范围内必须是唯一的。由此可见，一个 IP 地址在整个互联网范围内是唯一的。</p>
<p>IP地址分5类。A、B、C是常用的地址。IP地址的编码规定全0表示是本地地址，即本地网络或本地主机。全1表示广播地址，任何网站都能接收。所以，除去全0和全1地址外，A类有126个网络地址，1600万个主机地址；B类有16382个网络地址，64000个主机地址；C类有200万个网络地址，254个主机地址。<br><img src="http://q5j98c24z.bkt.clouddn.com/imgs/doc/20191222001/image-20191231151754492.png" alt="image-20191231151754492"><br><img src="http://q5j98c24z.bkt.clouddn.com/imgs/doc/20191222001/image-20191231155000727.png" alt="image-20191231155000727"></p>
<p><img src="http://q5j98c24z.bkt.clouddn.com/imgs/doc/20191222001/image-20191231160055476.png" alt="image-20191231160055476"></p>
<p>IP地址的范围指派：</p>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>网络类别</strong></th>
<th style="text-align:center"><strong>最大可指派的网络数</strong></th>
<th style="text-align:center"><strong>第一个可指派的网络号</strong></th>
<th><strong>最后一个可指派的网络号</strong></th>
<th style="text-align:center"><strong>每个网络中最大主机数</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>A</strong></td>
<td style="text-align:center"><strong>126 (2^7– 2)</strong></td>
<td style="text-align:center"><strong>1</strong></td>
<td><strong>126</strong></td>
<td style="text-align:center"><strong>16777214</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>B</strong></td>
<td style="text-align:center"><strong>16383 (2^14 – 1)</strong></td>
<td style="text-align:center"><strong>128.1</strong></td>
<td><strong>191.255</strong></td>
<td style="text-align:center"><strong>65534</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>C</strong></td>
<td style="text-align:center"><strong>2097151 (2^21– 1)</strong></td>
<td style="text-align:center"><strong>192.0.1</strong></td>
<td><strong>223.255.255</strong></td>
<td style="text-align:center"><strong>254</strong></td>
</tr>
</tbody>
</table>
<p>一般不使用的特殊的IP地址：</p>
<table>
<thead>
<tr>
<th><strong>网络号</strong></th>
<th><strong>主机号</strong></th>
<th><strong>源地址使用</strong></th>
<th><strong>目的地址使用</strong></th>
<th><strong>代表的意思</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td><strong>0</strong></td>
<td><strong>可以</strong></td>
<td><strong>不可</strong></td>
<td><strong>在本网络上的本主机</strong></td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><strong>host-id</strong></td>
<td><strong>可以</strong></td>
<td><strong>不可</strong></td>
<td><strong>在本网络上的某台主机host-id</strong></td>
</tr>
<tr>
<td><strong>全</strong> <strong>1</strong></td>
<td><strong>全</strong> <strong>1</strong></td>
<td><strong>不可</strong></td>
<td><strong>可以</strong></td>
<td><strong>只在本网络上进行广播（各路由器均不转发）</strong></td>
</tr>
<tr>
<td><strong>net-id</strong></td>
<td><strong>全</strong> <strong>1</strong></td>
<td><strong>不可</strong></td>
<td><strong>可以</strong></td>
<td><strong>对net-id上的所有主机进行广播</strong></td>
</tr>
<tr>
<td><strong>127</strong></td>
<td><strong>非全 0或全1的任何数</strong></td>
<td><strong>可以</strong></td>
<td><strong>可以</strong></td>
<td><strong>用于本地软件环回测试</strong></td>
</tr>
</tbody>
</table>
<p>例如常见的特殊IP：</p>
<ul>
<li>127.0.0.1，本地回环地址，其实只要是127开始的任意地址，你在本地计算机都可以ping通。如果ping不通说明你的物理层网卡有问题，如果物理层没问题，那么TCP/IP协议栈有问题。</li>
<li>169.254.0.0 ，Windows主机特殊的地址，当Windows主机找不到DHCP服务器的时候，会默认分配169.254.X.X的IP地址。</li>
<li>10.0.0.0，保留的A类私网地址，一般用于政府、企业、学校网络。我大学校园网都是一个10.x.x.x的A类网络。</li>
<li>172.16.0.0 - 172.31.0.0  ，保留的C类私网地址</li>
<li>192.168.0.0 - 192.168.255.0，保留的C类私网地址<h2 id="1-5-IP-地址的一些重要特点"><a href="#1-5-IP-地址的一些重要特点" class="headerlink" title="1.5 IP 地址的一些重要特点"></a>1.5 IP 地址的一些重要特点</h2></li>
</ul>
<ol>
<li>IP 地址是一种分等级的地址结构。分两个等级的好处是：<br>第一，IP 地址管理机构在分配 IP 地址时只分配网络号，而剩下的主机号则由得到该网络号的单位自行分配。这样就方便了 IP 地址的管理。<br>第二，路由器仅根据目的主机所连接的网络号来转发分组（而不考虑目的主机号），这样就可以使路由表中的项目数大幅度减少，从而减小了路由表所占的存储空间。</li>
<li>实际上 IP 地址是标志一个主机（或路由器）和一条链路的接口。<br>当一个主机同时连接到两个网络上时，该主机就必须同时具有两个相应的 IP 地址，其网络号 net-id 必须是不同的。这种主机称为多归属主机 (multihomed host)。<br>由于一个路由器至少应当连接到两个网络（这样它才能将 IP 数据报从一个网络转发到另一个网络），因此一个路由器至少应当有两个不同的 IP 地址。 </li>
<li>用转发器或网桥连接起来的若干个局域网仍为一个网络，因此这些局域网都具有同样的网络号net-id。</li>
<li>所有分配到网络号 net-id 的网络，无论是范围很小的局域网，还是可能覆盖很大地理范围的广域网，都是平等的。<h1 id="2-子网划分和构造超网"><a href="#2-子网划分和构造超网" class="headerlink" title="2. 子网划分和构造超网"></a>2. 子网划分和构造超网</h1></li>
</ol>
<h2 id="2-1-划分子网"><a href="#2-1-划分子网" class="headerlink" title="2.1 划分子网"></a>2.1 划分子网</h2><h3 id="2-1-1-从两级-IP-到三级-IP"><a href="#2-1-1-从两级-IP-到三级-IP" class="headerlink" title="2.1.1 从两级 IP 到三级 IP"></a>2.1.1 从两级 IP 到三级 IP</h3><p>在 ARPANET 的早期，IP 地址的设计确实不够合理：<br>(1) IP 地址空间的利用率有时很低。<br>(2) 给每一个物理网络分配一个网络号会使路由表变得太大因而使网络性能变坏。<br>(3) 两级的 IP 地址不够灵活。</p>
<h3 id="2-1-2-三级IP"><a href="#2-1-2-三级IP" class="headerlink" title="2.1.2 三级IP"></a>2.1.2 三级IP</h3><p>从 1985 年起在 IP 地址中又增加了一个“子网号字段”，使两级的 IP 地址变成为三级的 IP 地址。<br>这种做法叫做划分子网 (subnetting) 。<br>划分子网已成为互联网的正式标准协议。 </p>
<p>(1) 划分子网纯属一个单位内部的事情。单位对外仍然表现为没有划分子网的网络。<br>(2) 从主机号借用若干个位作为子网号 subnet-id，而主机号 host-id 也就相应减少了若干个位。</p>
<p><strong>IP地址=网络号+(子网号+主机号)</strong></p>
<p>凡是从其他网络发送给本单位某个主机的IP数据报，仍然是根据IP数据报的目的网络号 net-id，先找到连接在本单位网络上的路由器。<br>然后此路由器在收到 IP 数据报后，再按目的网络号 net-id 和子网号 subnet-id 找到目的子网。<br>最后就将 IP 数据报直接交付目的主机。</p>
<p>假设以下为一个未划分子网的B类网络145.13.0.0，网络号是145.13，后面两位是主机号，即凡是地址为145.13.x.x的数据报文都被送到这个网络上的路由器R1。</p>
<p><img src="http://q5j98c24z.bkt.clouddn.com/imgs/doc/20191222001/image-20200103105603931.png" alt="image-20200103105603931"></p>
<p>若子网号占8位，将上述的网络划分为三个子网后，主机号就只有8位，所以划分的三个子网是145.13.3.0、145.13.7.0、145.13.21.0，在划分子网后，整个网络对外部仍然表现为一个网络，其网络地址仍为145.13.0.0。但是网络145.13.0.0上的路由器R1在收到外来的数据后，再根据数据报的目的地址把它转发到相应的子网。<br><img src="http://q5j98c24z.bkt.clouddn.com/imgs/doc/20191222001/image-20200103110217937.png" alt="image-20200103110217937"><br>划分子网后的优点：</p>
<ul>
<li>减少了 IP 地址的浪费</li>
<li>使网络的组织更加灵活</li>
<li>更便于维护和管理</li>
</ul>
<h2 id="2-2-子网掩码"><a href="#2-2-子网掩码" class="headerlink" title="2.2 子网掩码"></a>2.2 子网掩码</h2><p>我们来思考一个问题：假设有一个数据报,其目的地址是145.13.3.10已到达了路由器R1。那么这个路由器如何把它转发到子网145.13.3.0呢？</p>
<p>从一个 IP 数据报的首部并无法判断源主机或目的主机所连接的网络是否进行了子网划分。使用子网掩码 (subnet mask) 可以找出 IP 地址中的子网部分。<br>规则：</p>
<ul>
<li>子网掩码长度 ＝ 32 位</li>
<li>子网掩码左边部分的一连串 1，对应于网络号和子网号</li>
<li>子网掩码右边部分的一连串 0，对应于主机号 </li>
<li>(IP 地址) 与运算 (子网掩码) = 子网的网络地址</li>
</ul>
<p>使用子网掩码的好处:</p>
<p>不管网络有没有划分子网，只要把子网掩码和IP地址进行与运算，就立即得出网络地址。</p>
<p>145.13.0.0是一个普通的B类网络，其子网掩码为16个连续1+16个连续0，数据报进入到这个网络后到路由器层，就可以知道有许多子网，此时可以计算此时的网络地址为：145.13.x.0，其x表示不同的子网号</p>
<h3 id="2-2-1-默认的子网掩码"><a href="#2-2-1-默认的子网掩码" class="headerlink" title="2.2.1 默认的子网掩码"></a>2.2.1 默认的子网掩码</h3><p><img src="http://q5j98c24z.bkt.clouddn.com/imgs/doc/20191222001/image-20200103161009075.png" alt="image-20200103161009075"></p>
<p>子网掩码是一个网络或一个子网的重要属性。<br>路由器在和相邻路由器交换路由信息时，必须把自己所在网络（或子网）的子网掩码告诉相邻路由器。<br>路由器的路由表中的每一个项目，除了要给出目的网络地址外，还必须同时给出该网络的子网掩码。<br>若一个路由器连接在两个子网上，就拥有两个网络地址和两个子网掩码。</p>
<h3 id="2-2-2-子网划分方法"><a href="#2-2-2-子网划分方法" class="headerlink" title="2.2.2 子网划分方法"></a>2.2.2 子网划分方法</h3><ul>
<li>有固定长度子网和变长子网两种子网划分方法。</li>
<li>在采用固定长度子网时，所划分的所有子网的子网掩码都是相同的。</li>
<li>虽然根据已成为互联网标准协议的 RFC 950 文档，子网号不能为全 1 或全 0，但随着无分类域间路由选择 CIDR 的广泛使用，现在全 1 和全 0 的子网号也可以使用了，但一定要谨慎使用，确认你的路由器所用的路由选择软件是否支持全 0 或全 1 的子网号这种较新的用法。</li>
<li>划分子网增加了灵活性，但却减少了能够连接在网络上的主机总数。</li>
</ul>
<h3 id="2-2-3-B类地址的子网划分选择（使用固定长度子网）"><a href="#2-2-3-B类地址的子网划分选择（使用固定长度子网）" class="headerlink" title="2.2.3 B类地址的子网划分选择（使用固定长度子网）"></a>2.2.3 B类地址的子网划分选择（使用固定长度子网）</h3><table>
<thead>
<tr>
<th style="text-align:center"><strong>子网号的位数</strong></th>
<th style="text-align:center"><strong>子网掩码</strong></th>
<th style="text-align:center"><strong>子网数</strong></th>
<th style="text-align:center"><strong>每个子网的主机数</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>2</strong></td>
<td style="text-align:center"><strong>255.255.192.0</strong></td>
<td style="text-align:center"><strong>2</strong></td>
<td style="text-align:center"><strong>16382</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>3</strong></td>
<td style="text-align:center"><strong>255.255.224.0</strong></td>
<td style="text-align:center"><strong>6</strong></td>
<td style="text-align:center"><strong>8190</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>4</strong></td>
<td style="text-align:center"><strong>255.255.240.0</strong></td>
<td style="text-align:center"><strong>14</strong></td>
<td style="text-align:center"><strong>4094</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>5</strong></td>
<td style="text-align:center"><strong>255.255.248.0</strong></td>
<td style="text-align:center"><strong>30</strong></td>
<td style="text-align:center"><strong>2046</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>6</strong></td>
<td style="text-align:center"><strong>255.255.252.0</strong></td>
<td style="text-align:center"><strong>62</strong></td>
<td style="text-align:center"><strong>1022</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>7</strong></td>
<td style="text-align:center"><strong>255.255.254.0</strong></td>
<td style="text-align:center"><strong>126</strong></td>
<td style="text-align:center"><strong>510</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>8</strong></td>
<td style="text-align:center"><strong>255.255.255.0</strong></td>
<td style="text-align:center"><strong>254</strong></td>
<td style="text-align:center"><strong>254</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>9</strong></td>
<td style="text-align:center"><strong>255.255.255.128</strong></td>
<td style="text-align:center"><strong>510</strong></td>
<td style="text-align:center"><strong>126</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>10</strong></td>
<td style="text-align:center"><strong>255.255.255.192</strong></td>
<td style="text-align:center"><strong>1022</strong></td>
<td style="text-align:center"><strong>62</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>11</strong></td>
<td style="text-align:center"><strong>255.255.255.224</strong></td>
<td style="text-align:center"><strong>2046</strong></td>
<td style="text-align:center"><strong>30</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>12</strong></td>
<td style="text-align:center"><strong>255.255.255.240</strong></td>
<td style="text-align:center"><strong>4094</strong></td>
<td style="text-align:center"><strong>14</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>13</strong></td>
<td style="text-align:center"><strong>255.255.255.248</strong></td>
<td style="text-align:center"><strong>8190</strong></td>
<td style="text-align:center"><strong>6</strong></td>
</tr>
<tr>
<td style="text-align:center"><strong>14</strong></td>
<td style="text-align:center"><strong>255.255.255.252</strong></td>
<td style="text-align:center"><strong>16382</strong></td>
<td style="text-align:center"><strong>2</strong></td>
</tr>
</tbody>
</table>
<p>注意：表中的“子网号的位数”中没有 0, 1, 15 和 16 这四种情况，因为这没有意义。</p>
<p>其实可以总结为：<strong>子网数=2^子网号的位数-2</strong>，主机部分全0和全1的不能用</p>
<p><strong>已知 IP 地址是 141.14.72.24，子网掩码是 255.255.192.0。试求网络地址？</strong></p>
<p>划分步骤：</p>
<ol>
<li>点分十进制表示的IP地址，将十进制的IP段用二进制表示；</li>
<li>将子网掩码也用二进制表示；</li>
<li>两者进行与运算得出网络地址为141.14.64.0</li>
</ol>
<p><strong>若子网掩码改为 255.255.224.0，试求网络地址，讨论所得结果？</strong> </p>
<p>按照上述步骤，其实算下来的网络地址还是141.14.64.0。</p>
<p>由此可见：<strong>不同的子网掩码得出相同的网络地址。但不同的掩码的效果是不同的。</strong></p>
<h2 id="2-3-各类IP子网划分示例"><a href="#2-3-各类IP子网划分示例" class="headerlink" title="2.3 各类IP子网划分示例"></a>2.3 各类IP子网划分示例</h2><h3 id="2-3-1-等分子网划分"><a href="#2-3-1-等分子网划分" class="headerlink" title="2.3.1  等分子网划分"></a>2.3.1  等分子网划分</h3><p><strong>背景：</strong></p>
<p>   某公司有两个部门，每个部门各有100台主机，并且都在使用192.168.0.0C类网络，该网络子网掩码是255.255.255.0，连接局域网的路由器接口可配置的第一个可用IP地址是192.168.0.1</p>
<p><strong>需求：</strong></p>
<p>现在公司提出等分成两个子网将不同部门的网络隔离出来，即将一个C类地址等分为两个网段。两个网络之间通过路由器进行网络转发，目的是为了局域网安全(比如技术部门的主机不能够查看财务部门的共享资料)。</p>
<p><strong>划分步骤：</strong></p>
<ol>
<li>主机位往往后移动1位</li>
<li>此时A子网的IP段就是192.168.0.0(子网位) 1111111(主机位)，B子网的IP段就是192.168.0.1(子网位) 0000000(主机位)</li>
<li>最终得出子网掩码为255.255.255.128</li>
<li>A子网主机部分是全0或全1的IP地址不能用，即192.168.0.0(没有意义，只代表网络号)和192.168.0.127(广播地址)，所以A的有效地址为192.168.0.1 - 192.168.0.126</li>
<li>B子网主机部分是全0或全1的IP地址不能用，即192.168.0.128(没有意义，只代表网络号)和192.168.0.255(广播地址)，所以A的有效地址为192.168.0.129 - 192.168.0.254</li>
</ol>
<p><strong>总结</strong>：</p>
<p><strong>子网掩码往后移N位，则每个子网是原来的1/2^N。</strong></p>
<p><strong>子网划分的个数只能是偶数，不能是奇数</strong></p>
<h3 id="2-3-2-变长子网划分"><a href="#2-3-2-变长子网划分" class="headerlink" title="2.3.2 变长子网划分"></a>2.3.2 变长子网划分</h3><p><strong>需求：</strong></p>
<p>判断192.168.0.101/26所属的子网</p>
<p><strong>分析思路:</strong></p>
<ol>
<li>192.168.0.101/24子网掩码为255.255.255.0，那么192.168.0.101/26其实就是子网掩码往后移两位</li>
<li>整个网络被分为了4部分，主机位归0，子网掩码为255.255.255.64</li>
<li>那么最终101所在的子网有效地址为192.168.0.1-192.168.0.63</li>
</ol>
    </div>
    
        <div class="reward" ontouchstart="">
    <div class="reward-wrap">赏
        <div class="reward-box">
            
                <span class="reward-type">
                    <img class="alipay" src="/about/alipay.png"><b>支付宝打赏</b>
                </span>
            
            
                <span class="reward-type">
                    <img class="wechat" src="/about/weixin.png"><b>微信打赏</b>
                </span>
            
        </div>
    </div>
    <p class="reward-tip">请作者喝杯咖啡吧</p>

    <!-- 社会分享工具 -->
    <div class="bdsharebuttonbox">
         <a href="#" class="bds_more" data-cmd="more"></a>
         <a href="#" class="bds_qzone" data-cmd="qzone"></a><a href="#" class="bds_tsina" data-cmd="tsina"></a>
         <a href="#" class="bds_tqq" data-cmd="tqq"></a><a href="#" class="bds_renren" data-cmd="renren"></a>
         <a href="#" class="bds_weixin" data-cmd="weixin"></a>
    </div>
     <script>
        window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdPic":"","bdStyle":"0","bdSize":"16"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","renren","weixin"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
     </script>
</div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="" target="_blank">彤哥哥</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/2020/01/01/ES6回顾/" class="pre-post btn btn-default" title="ES6回顾">
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">ES6回顾</span>
        </a>
    
    
        <a href="/2019/12/22/跟着彤哥学网络-初识网络层/" class="next-post btn btn-default" title="跟着彤哥学网络-初识网络层">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">跟着彤哥学网络-初识网络层</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: 'wA3iNQOiAuhrRJkNgIjirA8f-gzGzoHsz',
            appKey: 'iGL0JyEnJQ8HIMlLd4Sm0oOp',
            placeholder: '说点什么吧',
            notify: false,
            verify: false,
            avatar: 'mm',
            meta: 'nick,mail,link'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-CN'.toLowerCase()
        })
    </script>
    </div>
                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-IPv4组成与分类"><span class="toc-text">1 IPv4组成与分类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-IPv4组成"><span class="toc-text">1.1 IPv4组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-IPv4现状"><span class="toc-text">1.2 IPv4现状</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-IPv4地址编址方法"><span class="toc-text">1.3 IPv4地址编址方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-IPv4基本分类"><span class="toc-text">1.4 IPv4基本分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-IP-地址的一些重要特点"><span class="toc-text">1.5 IP 地址的一些重要特点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-子网划分和构造超网"><span class="toc-text">2. 子网划分和构造超网</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-划分子网"><span class="toc-text">2.1 划分子网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-从两级-IP-到三级-IP"><span class="toc-text">2.1.1 从两级 IP 到三级 IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-三级IP"><span class="toc-text">2.1.2 三级IP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-子网掩码"><span class="toc-text">2.2 子网掩码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-默认的子网掩码"><span class="toc-text">2.2.1 默认的子网掩码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-子网划分方法"><span class="toc-text">2.2.2 子网划分方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-B类地址的子网划分选择（使用固定长度子网）"><span class="toc-text">2.2.3 B类地址的子网划分选择（使用固定长度子网）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-各类IP子网划分示例"><span class="toc-text">2.3 各类IP子网划分示例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-等分子网划分"><span class="toc-text">2.3.1  等分子网划分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-变长子网划分"><span class="toc-text">2.3.2 变长子网划分</span></a></li></ol></li></ol></li></ol>
        
    </div>
</aside>
                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
        访问量:
        <strong id="busuanzi_value_site_pv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
        &nbsp; | &nbsp;
        访客数:
        <strong id="busuanzi_value_site_uv">
            <i class="fa fa-spinner fa-spin"></i>
        </strong>
    
</div>
            </div>
            <div>
                <!-- 服务器运行时间统计 -->
                <span id="sitetime"></span>
            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2019
                </span> |
                <span>
                    Powered by <a href="//ltyeamin.github.io" class="copyright-links" target="_blank" rel="nofollow">litong</a>
                </span> |
                <span>
                    Blog by <a href="//ltyeamin.github.io" class="copyright-links" target="_blank" rel="nofollow">彤哥哥</a>
                </span>
            </div>
        </div>
    </div>
</div>


<script src="/assets/tagcanvas.min.js?rev=2.9"></script>
    <script>
        var tagOption = {
            textColour: '#e67e22', // 字体颜色
            outlineMethod: 'block', // 选中模式
            outlineColour: '  #FDF5E6', // 选中模式的颜色
            interval: 30 || 30, // 动画帧之间的时间间隔，值越大，转动幅度越大
            textHeight: 13,
            outlineRadius: 3,
            freezeActive: true || '', // 选中的标签是否继续滚动
            frontSelect: true || '', // 不选标签云后部的标签
            initial: [0.1, -0.1],
            depth: 0.5,
            decel: 0.95,
            maxSpeed: 0.03,
            reverse: true || '', // 是否反向触发
            fadeIn: 500, // 进入动画时间
            wheelZoom: true || '' // 是否启用鼠标滚轮
        }
        TagCanvas.Start('tag-cloud-3d','',tagOption);
    </script>



    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/js/app.js?rev=@@hash"></script>
<!-- 页面点击小红心，在末尾添加，避免找不到 -->
<script type="text/javascript" src="/js/love.js"></script>

<!-- DaoVoice即时通讯工具 -->

 <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "10b503a1"
    });
  daovoice('update');
  </script>


<!-- 音频播放 
<link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>
-->

<!-- 服务器运行时间统计 -->
<script language="javascript">
        function siteTime(){
          window.setTimeout("siteTime()", 1000);
          var seconds = 1000;
          var minutes = seconds * 60;
          var hours = minutes * 60;
          var days = hours * 24;
          var years = days * 365;
          var today = new Date();
          var todayYear = today.getFullYear();
          var todayMonth = today.getMonth()+1;
          var todayDate = today.getDate();
          var todayHour = today.getHours();
          var todayMinute = today.getMinutes();
          var todaySecond = today.getSeconds();
          /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
          year - 作为date对象的年份，为4位年份值
          month - 0-11之间的整数，做为date对象的月份
          day - 1-31之间的整数，做为date对象的天数
          hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
          minutes - 0-59之间的整数，做为date对象的分钟数
          seconds - 0-59之间的整数，做为date对象的秒数
          microseconds - 0-999之间的整数，做为date对象的毫秒数 */
          var t1 = Date.UTC(2016,12,1,00,00,00); //北京时间2016-12-1 00:00:00
          var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
          var diff = t2-t1;
          var diffYears = Math.floor(diff/years);
          var diffDays = Math.floor((diff/days)-diffYears*365);
          var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
          var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
          var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
          document.getElementById("sitetime").innerHTML=" 本站已运行 "+ diffYears+" 年 "+ diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分 "+diffSeconds+" 秒";
        }
        siteTime();
</script>
</body>
